;
(self.SPZ=self.SPZ||[]).push({n:"spz-slide-indicator",ev:"0.1",l:!0,t:"v1",v:"1.0",m:0,f:function(t,i){!function(){function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function e(t,i){return(e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,i){return t.__proto__=i,t})(t,i)}function n(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var o="i-spzhtml-slide-indicator__dot--large",s="i-spzhtml-slide-indicator__dot--active",a="i-spzhtml-slide-indicator__dot",u=function(i){!function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),i&&e(t,i)}(d,i);var u,c,l,h,f=(l=d,h=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,i=r(l);if(h){var e=r(this).constructor;t=Reflect.construct(i,arguments,e)}else t=i.apply(this,arguments);return n(this,t)});function d(t){var i;return function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,d),(i=f.call(this,t)).dots_=[],i.current_=0,i.size_=0,i.carouselId_="",i.dotLength_=0,i.range_=void 0,i.listenDotClick_=null,i}return u=d,(c=[{key:"buildCallback",value:function(){this.carouselId_=this.assert(this.element.getAttribute("carousel-id"),"carousel-id is required")}},{key:"isLayoutSupported",value:function(t){return t==SPZCore.Layout.CONTAINER}},{key:"layoutCallback",value:function(){var i=this,e=this.element.ownerDocument.getElementById(this.carouselId_);if(e)return t.whenApiDefined(e).then((function(t){t.getData().then((function(t){var e=t.slideActive,n=t.slideLength;i.current_=e,i.dotLength_=n,i.size_=i.computeSize_()})).then((function(){i.buildDots_(),i.active_()}))}))}},{key:"unmountCallback",value:function(){this.listenDotClick_&&(this.listenDotClick_(),this.listenDotClick_=null)}},{key:"active_",value:function(){this.size_&&this.updateIndicator_()}},{key:"updateIndicator_",value:function(){this.calculateVisibleRange_(),this.updateDotStates_(),this.updateViewportStyle_()}},{key:"updateDotStates_",value:function(){var t=this,i=this.current_;this.size_<this.dotLength_?this.dots_.forEach((function(e,n){t.setDotClass_(e,o,t.isLargeSize_(n)),t.setDotClass_(e,s,n===i)})):this.dots_.forEach((function(e,n){t.setDotClass_(e,o,!0),t.setDotClass_(e,s,n===i)}))}},{key:"buildDots_",value:function(){if(0!==this.size_){for(var t=this.element.ownerDocument,i=t.createDocumentFragment(),e=[],n=0;n<this.dotLength_;n++){var r=t.createElement("span");r.className=a,r.dataset.index=String(n),i.appendChild(r),e.push(r)}this.dots_=e,this.element.appendChild(i),this.setupDotClick_()}}},{key:"setupDotClick_",value:function(){var t=this;this.listenDotClick_=SPZUtils.Event.listen(this.element,"click",(function(i){return t.onDotClick_(i)}))}},{key:"onDotClick_",value:function(t){var i=t.target,e=i.classList.contains(a)?i:null;if(e){t.stopPropagation();var n=Number(e.getAttribute("data-index"));this.triggerCarouselSlide_(n)}}},{key:"triggerCarouselSlide_",value:function(i){var e=this.element.ownerDocument.getElementById(this.carouselId_);e&&t.whenApiDefined(e).then((function(t){t&&t.goToSlide&&t.goToSlide(i)}))}},{key:"setDotClass_",value:function(t,i,e){e?t.classList.add(i):t.classList.remove(i)}},{key:"computeSize_",value:function(){var t=Math.floor(Number(this.element.getAttribute("size"))||0),i=Math.max(0,Math.min(t,this.dotLength_));return this.toggleEmptyState_(),i}},{key:"updateViewportStyle_",value:function(){var t=this.dots_[this.range_.start],i=this.computeRangeDotWidth_()+this.computeDotWidth_(this.range_.end);SPZCore.Dom.setStyle(this.element,"width","".concat(i,"px"));var e=this.computeDotStyle_(t,"marginLeft");this.element.scrollTo({left:t.offsetLeft-e,behavior:"smooth"})}},{key:"computeDotWidth_",value:function(t){var i=this.dots_[t],e=this.computeDotStyle_(i,"marginLeft"),n=this.computeDotStyle_(i,"marginRight");return i.getBoundingClientRect().width+e+n}},{key:"computeDotStyle_",value:function(t,i){var e=SPZCore.Dom.computedStyle(this.win,t);return parseFloat(e[i]||"0")||0}},{key:"computeRangeDotWidth_",value:function(){var t=this.dots_[this.range_.start];return this.dots_[this.range_.end].offsetLeft-t.offsetLeft}},{key:"toggleEmptyState_",value:function(){SPZCore.Dom.toggleAttribute(this.element,"empty",0===this.size_)}},{key:"isLargeSize_",value:function(t){var i=this.range_.start>0,e=this.range_.end<this.dotLength_-1,n=this.current_>this.range_.start,r=this.current_<this.range_.end;return!(!this.dotInRange_(t)||(this.dotInRangeFirst_(t)?n&&i:this.dotInRangeLast_(t)&&r&&e))}},{key:"dotInRangeFirst_",value:function(t){return t===this.range_.start}},{key:"dotInRangeLast_",value:function(t){return t===this.range_.end}},{key:"dotInRange_",value:function(t){return t>=this.range_.start&&t<=this.range_.end}},{key:"calculateVisibleRange_",value:function(){var t=this.current_,i=this.size_;if(this.checkOverRange_()){var e,n=this.dots_.findIndex((function(t){return t.classList.contains(s)})),r=Math.max(0,this.dotLength_-i);if(-1===n)e=t-Math.floor((i-1)/2);else if(n<t)e=t>0?t-1:t;else if(n>t){var o=t<this.dotLength_-1;e=t-Math.max(0,o?i-2:i-1)}(e=Math.max(0,e))>r&&(e=r);var a=e+i-1;this.range_={start:e,end:a}}}},{key:"checkOverRange_",value:function(){if(!this.range_)return!0;var t=this.range_,i=t.end,e=t.start;return this.current_<=e||this.current_>=i}},{key:"changeActive",value:function(t){var i=this;SPZCore.Types.throttle(this.win,(function(){i.current_=t,i.updateIndicator_()}),300)()}}])&&function(t,i){for(var e=0;e<i.length;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}(u.prototype,c),Object.defineProperty(u,"prototype",{writable:!1}),d}(t.BaseElement);self.SPZ.registerElement("spz-slide-indicator",u,'spz-slide-indicator{position:relative;box-sizing:border-box;overflow:hidden;white-space:nowrap}spz-slide-indicator[empty]{height:14px;width:0px}spz-slide-indicator .i-spzhtml-slide-indicator__dot{width:4px;height:4px;margin:4px 3px;border-radius:50%;background-color:#c9cbcc;display:inline-block;vertical-align:middle;cursor:pointer;transition:background-color 0.3s ease,width 0.3s ease,height 0.3s ease}spz-slide-indicator[type=progress] .i-spzhtml-slide-indicator__dot{width:6px;height:1px;border-radius:3px;position:relative}spz-slide-indicator[type=progress] .i-spzhtml-slide-indicator__dot:before{height:3px;content:"";position:absolute;left:0;right:0;top:50%;transform:translateY(-50%);background:transparent;pointer-events:auto}spz-slide-indicator .i-spzhtml-slide-indicator__dot--large,spz-slide-indicator .i-spzhtml-slide-indicator__dot:hover{transform:scale(1.5)}spz-slide-indicator[type=progress] .i-spzhtml-slide-indicator__dot--large,spz-slide-indicator[type=progress] .i-spzhtml-slide-indicator__dot:hover{transform:scaleX(1.333) scaleY(2)}spz-slide-indicator .i-spzhtml-slide-indicator__dot--active{background-color:#6f7071}\n/*# sourceURL=/extensions/spz-slide-indicator/0.1/spz-slide-indicator.css*/')}()}});

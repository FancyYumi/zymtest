;
(self.SPZ=self.SPZ||[]).push({n:"spz-carousel",ev:"0.1",l:!0,t:"v1",v:"1.0",m:0,f:function(t,i){!function(){var i;function s(t,i){for(var s=[],e=0,n=0;n<t.length;n++){var o=t[n];i(o,n,t)?s.push(o):(e<n&&(t[e]=o),e++)}return e<t.length&&(t.length=e),s}Array.isArray;var e=Object.prototype;function n(t){return 1==(null==(i=t)?void 0:i.nodeType)?(t=t).tagName.toLowerCase()+(t.id?"#".concat(t.id):""):t;var i}function o(t,i){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);i&&(e=e.filter((function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),s.push.apply(s,e)}return s}function r(t){for(var i=1;i<arguments.length;i++){var s=null!=arguments[i]?arguments[i]:{};i%2?o(Object(s),!0).forEach((function(i){h(t,i,s[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(s,i))}))}return t}function h(t,i,s){return i in t?Object.defineProperty(t,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[i]=s,t}e.hasOwnProperty,e.toString;var a="i-spzhtml-carousel-has-controls",l="spz-carousel-slide",u="i-spzhtml-carousel-resting",c="i-spzhtml-slide-item",v="i-spzhtml-slide-item-copy",f="i-spzhtml-slide-row-wrapper",d="i-spzhtml-slide-row-item",p="i-spzhtml-slides-container",m="i-spzhtml-slide-item-show",y="i-spzhtml-carousel-scroll-disabled",b="i-spzhtml-copy-carousel-style",S={pre:'<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="#fff" viewBox="0 0 18 18"><path d="M15 8.25H5.87l4.19-4.19L9 3 3 9l6 6 1.06-1.06-4.19-4.19H15v-1.5z"/></svg>',next:'<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="#fff" viewBox="0 0 18 18"><path d="M9 3L7.94 4.06l4.19 4.19H3v1.5h9.13l-4.19 4.19L9 15l6-6z"/></svg>',close:'<svg width="36" height="36" viewBox="0 0 36 36" fill="none" xmlns="http://www.w3.org/2000/svg"><rect width="36" height="36" rx="18" fill="#6F6F6F" fill-opacity="0.7"/><path d="M13.1211 11.9896C13.0039 11.8724 12.814 11.8724 12.6968 11.9896L11.9897 12.6967C11.8726 12.8139 11.8726 13.0038 11.9897 13.121L16.8688 18L11.9897 22.8791C11.8726 22.9962 11.8726 23.1862 11.9897 23.3033L12.6968 24.0104C12.814 24.1276 13.0039 24.1276 13.1211 24.0104L18.0001 19.1314L22.8792 24.0104C22.9963 24.1276 23.1863 24.1276 23.3033 24.0104L24.0105 23.3033C24.1277 23.1861 24.1277 22.9962 24.0105 22.879L19.1315 18L24.0105 13.121C24.1277 13.0038 24.1277 12.8139 24.0105 12.6967L23.3035 11.9896C23.1863 11.8725 22.9963 11.8725 22.8792 11.9896L18.0001 16.8687L13.1211 11.9896Z" fill="white"/></svg>'};function k(t,i){var s=i.className,e=i.enabled,n=i.outerHTML,o=t.ownerDocument.createElement("div");return o.setAttribute("tabindex","0"),o.classList.add("spz-carousel-button",s),o.setAttribute("role","button"),g(o,e),o.innerHTML=n,t.appendChild(o),o}function g(t,i){t.classList.toggle("spz-disabled",!i),t.setAttribute("aria-disabled",String(!i)),t.setAttribute("tabindex",String(i?0:-1))}function z(t,i,s){var e=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=e?document:t.ownerDocument,o=[],r=[],h=Number(t.getAttribute("row-count"))||1,a=function(){h>1?M(i,h).forEach((function(t){var i=n.createElement("div");i.classList.add(c);var e=n.createElement("div");e.classList.add(f,l),t.forEach((function(t){t.classList.add(d),e.appendChild(t)})),i.appendChild(e),s.appendChild(i),o.push(i),r.push(t)})):i.forEach((function(t){t.classList.add(l);var i=n.createElement("div");i.classList.add(c),w(t,i),i.appendChild(t),s.appendChild(i),o.push(i),r.push([t])}))};return a(),{slideWrappers:o,slides:r}}function w(t,i){t.hasAttribute("popup-style")&&i.setAttribute("style",t.getAttribute("popup-style"))}function C(t,i,e,o){var r=i.length,h=Number(t.getAttribute("advance-count"))||1,a=h>1?Math.ceil(o/h):Math.ceil(o);if(!(r>1&&r>=a))return i;var u=i.filter((function(t){return t.children.length>0}));if(u.length<a)return i;var f=function(t){return Array.from(t.querySelectorAll("[role=copy]")).map((function(t){var i=document.createElement("div");return i.classList.add(c),i.classList.add(v),t.classList.add(l),i.appendChild(t),i}))}(t),d=[],p=[];f.length>0?(function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Assertion failed";if(t)return t;for(var e=2,o=i.split("%s"),r=o.shift(),h=[r];o.length;){var a=arguments[e++],l=o.shift();r+=n(a)+l,h.push(a,l.trim())}var u=new Error(r);throw u.messageArray=s(h,(function(t){return""!==t})),u}(f.length===2*a,"The preset number of copy elements needs to equal visibleCount * 2, current number is %s, needs to be %s",f.length,2*a),d=f.slice(0,a),p=f.slice(f.length-a,f.length)):(d=P(u.length-a,u.length,u,t),p=P(0,a,u,t));var m=d.concat(i,p);return p.forEach((function(t){t.parentNode!==e&&e.appendChild(t)})),d.reverse().forEach((function(t){t.parentNode!==e&&e.insertBefore(t,e.childNodes[0])})),m}function x(t){return(t.hasAttribute("loop")||t.hasAttribute("autoplay"))&&"fade"!==t.getAttribute("effect")&&"swipe"!==t.getAttribute("effect")}function P(t,i,s,e){for(var n=[],o=t;o<i;o++){var r=o%s.length;n.push(_(s[r],e))}return n}function _(t,i){var s=t.cloneNode(!0);return s.classList.add(v),s.querySelectorAll("[id]").forEach((function(t){i.childIds_.push(t.id),t.setAttribute("id","".concat(t.id,"-copy"))})),s}function Z(t,i){var s=SPZCore.Dom.scopedQuerySelector(t,"> [".concat(i,"]"));return s?(SPZCore.Dom.toggle(s,!0),t.removeChild(s).outerHTML):S[i]}function M(t,i){for(var s=[],e=0,n=-1;e<t.length;e++)e%i==0&&(s[++n]=[]),s[n].push(t[e]);return s}var j=function(){function t(i){var s=i.element,e=i.go,n=i.nextButton,o=i.prevButton;!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this.element_=s,this.go_=e,this.win_=s.ownerDocument.defaultView,this.prevButton_=o,this.nextButton_=n,this.showControls_=!1,this.setupBehaviors_()}var i,s;return i=t,(s=[{key:"setupBehaviors_",value:function(){var t=this;this.setupButtonInteraction(this.prevButton_,(function(){return t.handlePrev()})),this.setupButtonInteraction(this.nextButton_,(function(){return t.handleNext()})),this.element_.hasAttribute("controls")&&(this.showControls_=!0)}},{key:"setupButtonInteraction",value:function(t,i){t.addEventListener("click",(function(t){t.stopPropagation(),i()})),t.onselectstart=function(){return!1}}},{key:"setControlsState",value:function(t){var i=t.next,s=t.prev;g(this.prevButton_,s),g(this.nextButton_,i)}},{key:"hintControls",value:function(){var t=this;this.showControls_||SPZServices.vsyncFor(this.win_).mutate((function(){var i="i-spzhtml-carousel-button-start-hint";t.element_.classList.add(i),SPZServices.timerFor(t.win_).delay((function(){SPZServices.mutatorForDoc(t.element_).measureMutateElement(t.element_,null,(function(){t.element_.classList.remove(i),SPZCore.Dom.toggleAttribute(t.element_,"i-spzhtml-carousel-hide-buttons",!t.showControls_)}))}),4e3)}))}},{key:"handlePrev",value:function(){!this.prevButton_.classList.contains("spz-disabled")&&this.go_(-1,!0,!1)}},{key:"handleNext",value:function(){!this.nextButton_.classList.contains("spz-disabled")&&this.go_(1,!0,!1)}}])&&function(t,i){for(var s=0;s<i.length;s++){var e=i[s];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}(i.prototype,s),Object.defineProperty(i,"prototype",{writable:!1}),t}();var T=function(){function t(i){var s=this;!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this.slidesContainer_=i.slidesContainer_,this.slideWrappers_=i.slideWrappers_,this.animateTime=i.animateTime_,this.clearAutoplayTimer_=i.clearAutoplayTimer_.bind(i),this.element=i.element,this.documentElement_=self.document.documentElement,this.win=i.win,this.autoHeight="container"===this.element.getAttribute("layout"),this.setInitStyle_(),this.next_=function(){s.clearAutoplayTimer_(),i.moveSlide(1,!0)},this.pre_=function(){s.clearAutoplayTimer_(),i.moveSlide(-1,!0)}}var i,s;return i=t,(s=[{key:"onDragStart",value:function(t){this.clearAutoplayTimer_();var i=t.targetTouches&&t.targetTouches[0]||t.changedTouches&&t.changedTouches[0];this.start_={clientX:t.clientX?t.clientX:null==i?void 0:i.clientX,clientY:t.clientX?t.clientY:null==i?void 0:i.clientY},this.documentElement_.classList.add("i-spzhtml-carousel-scroll-disabled")}},{key:"onDragMove",value:function(t){var i;this.isZoom_=(null===(i=t.touches)||void 0===i?void 0:i.length)>1}},{key:"onDragEnd",value:function(t){var i=t.clientX?t:t.changedTouches[0],s=i.clientX,e=i.clientY;this.end_={clientX:s,clientY:e},this.calcAndCallback_(),this.documentElement_.classList.remove("i-spzhtml-carousel-scroll-disabled")}},{key:"calcAndCallback_",value:function(){if(this.start_&&this.end_&&!this.isZoom_){var t={x:this.end_.clientX-this.start_.clientX,y:this.end_.clientY-this.start_.clientY};Math.abs(t.y)>Math.abs(t.x)||(t.x>20?this.pre_():t.x<-20&&this.next_()),this.start_=this.end_=void 0}else SPZCore.Dom.toggleAttribute(this.element,"move",!1)}},{key:"setInitStyle_",value:function(){this.autoHeight&&SPZCore.Dom.setStyle(this.element,"transition","all ".concat(this.animateTime/1e3,"s linear"))}},{key:"update",value:function(t){this.slideWrappers_=t.slideWrappers,this.slidesContainer_=t.slidesContainer,this.max_=t.max}},{key:"fade",value:function(t){var i=this;t.update&&this.setInitStyle_();var s=t.index,e=this.slideWrappers_.filter((function(t,i){return i!==s&&t.classList.contains(m)}))[0],n=this.slideWrappers_[s]||this.slideWrappers_[0];n.classList.add(m),e&&(SPZCore.Dom.setStyle(e,"transition","all ".concat(this.animateTime/1e3,"s")),SPZCore.Dom.setStyle(e,"opacity",0),SPZCore.Dom.setStyles(this.element,{"height":"auto"}),e.classList.remove(m));var o=n.clientHeight,r=this.element.clientHeight;SPZCore.Dom.setStyles(this.element,{"height":r?"".concat(r,"px"):"auto"}),self.requestAnimationFrame((function(){SPZCore.Dom.setStyle(n,"transition","all ".concat(i.animateTime/1e3,"s")),SPZCore.Dom.setStyle(n,"opacity",1),setTimeout((function(){SPZCore.Dom.setStyles(i.element,{"height":o&&!t.update?"".concat(o,"px"):"auto"})}),0),i.dispatchEvent_()}))}},{key:"dispatchEvent_",value:function(){var t=SPZUtils.Event.create(this.win,"transitionend",{},{bubbles:!1});this.element.dispatchEvent(t)}}])&&function(t,i){for(var s=0;s<i.length;s++){var e=i[s];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}(i.prototype,s),Object.defineProperty(i,"prototype",{writable:!1}),t}();var O="vertical",E=["width","height"],D=function(){function t(i){var s=this;!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t);var e=i.animateTime_,n=i.clearAutoplayTimer_,o=i.element,r=i.max_,h=i.ratio_,a=i.shouldLoop_,l=i.slideIndex_,u=i.slideWrappers_,c=i.slidesContainer_,v=i.visibleCount_,f=i.win;this.animateTime_=e,this.clearAutoplayTimer_=n.bind(i),this.element=o,this.max_=r,this.shouldLoop_=a,this.slideIndex_=l,this.slideWrappers_=u,this.visibleCount_=v,this.container_=c,this.documentElement_=f.document.documentElement,this.isVertical_=this.element.getAttribute("direct")===O,this.win=f,this.ratio_=h||.01,this.directionFactor_=i.directionFactor,this.carousel_=i,this.copySlideCount_=this.calculateCopySlideCount_(),this.start_=void 0,this.end_=void 0,this.isIos_=SPZServices.platformFor(this.win).isIos(),this.next_=function(){s.clearAutoplayTimer_(),i.moveSlide(1,!0)},this.pre_=function(){s.clearAutoplayTimer_(),i.moveSlide(-1,!0)},this.setContainerHeight_(),this.setContainerWidth_(),this.initContainerRect_()}var i,s;return i=t,(s=[{key:"calculateCopySlideCount_",value:function(){var t=(this.element.hasAttribute("loop")||this.element.hasAttribute("autoplay"))&&"fade"!==this.element.getAttribute("effect")&&"swipe"!==this.element.getAttribute("effect")&&this.visibleCount_>0&&this.slideWrappers_.length>1,i=Number(this.element.getAttribute("advance-count"))||1;return t?i>1?Math.ceil(this.visibleCount_/i):Math.ceil(this.visibleCount_):0}},{key:"scroller",value:function(t){var i=this,s=t.animateTime,e=t.dir,n=t.isDragMoving,o=t.isUpdate,r=t.slideIndex,h=t.translateX,a=t.translateY,l=t.update,u=t.index,c=this.direct||e||0;this.isAdjustPosition_&&this.adjustPosition_(this.preX_,this.preY_),o&&(this.setContainerHeight_(o,null,l),this.setContainerWidth_(),this.initContainerRect_(),void 0===u?(u=this.slideIndex_+this.copySlideCount_,c=0):this.currentIndex=null);var v=this.handleHeadToTail_(u,c);this.preX_=this.parseTranslateX_(h,v),this.preY_=this.parseTranslateY_(a,v),SPZServices.timerFor(this.win).delay((function(){n||i.transitionEndReset_(i.preX_,i.preY_,c),i.setStyleTranslate_(n?i.preX_:i.preX_*i.directionFactor_,i.preY_,s),i.setContainerHeight_(!1,v)}),0),void 0!==v&&(this.currentIndex=v),void 0!==r&&(this.slideIndex_=r),this.toggleClass_()}},{key:"transitionEndReset_",value:function(t,i,s){var e=this;this.shouldLoop_&&s&&(this.currentIndex<=0||this.currentIndex>=this.max_+this.copySlideCount_)?(this.isAdjustPosition_=!0,this.removeTransitionedListen_&&this.removeTransitionedListen_(),this.removeTransitionedListen_=SPZUtils.Event.listenOnce(this.container_,"transitionend",(function(){e.element.classList.add(u),SPZServices.timerFor(e.win).delay((function(){e.adjustPosition_(t,i),e.toggleClass_(),requestAnimationFrame((function(){requestAnimationFrame((function(){e.element.classList.remove(u)}))}))}),e.animateTime_)}))):this.isAdjustPosition_=!1}},{key:"adjustPosition_",value:function(t,i){if(this.isAdjustPosition_){var s=this.getResetIndex_(),e=this.isVertical_?t:this.parseTranslateX_(void 0,s)*this.directionFactor_,n=this.isVertical_?this.parseTranslateY_(void 0,s):i;this.setStyleTranslate_(e,n,0,!0),this.currentIndex=s,this.isAdjustPosition_=!1,this.initPosition=this.getTranslate_()}}},{key:"getResetIndex_",value:function(){return this.currentIndex<=0?this.max_+this.currentIndex:this.currentIndex>=this.max_+this.copySlideCount_?this.copySlideCount_:void 0}},{key:"update",value:function(t){t.count&&(this.max_=t.count),t.slideWrappers&&(this.slideWrappers_=t.slideWrappers,this.slidesContainer_=t.slidesContainer,this.max_=t.max),t.direct&&(this.isVertical_=t.direct===O),t.visibleCount&&(this.visibleCount_=t.visibleCount,this.copySlideCount_=this.calculateCopySlideCount_())}},{key:"onDragMove",value:function(t){var i;if((null===(i=t.targetTouches)||void 0===i?void 0:i.length)>1||!this.isTouched_)this.direct=null;else{var s="touchmove"===t.type&&t.targetTouches&&(t.targetTouches[0]||t.changedTouches[0]),e="touchmove"===t.type?s.pageX:t.pageX,n="touchmove"===t.type?s.pageY:t.pageY,o=e-this.start_.clientX,r=n-this.start_.clientY,h=this.isVertical_?r:o;if(this.isVertical_&&Math.abs(o)>Math.abs(r)||!this.isVertical_&&Math.abs(r)>Math.abs(o))this.clearMove_();else{SPZCore.Dom.toggleAttribute(this.element,"move",!0);var a=this.calcDistance_(o,r),l=a.x,u=a.y;this.scroller({translateX:l,translateY:u,animateTime:0,isDragMoving:!0,dir:this.direct*this.directionFactor_}),this.setDirect_(h)}}}},{key:"calcDistance_",value:function(t,i){var s,e,n=this.isVertical_?i:t,o=this.initPosition,r=this.isVertical_?this.containerHeight_:this.containerWidth_;(this.currentIndex&&this.currentIndex>this.max_+this.copySlideCount_&&this.shouldLoop_||!this.currentIndex&&n>0&&this.shouldLoop_)&&(o=-(this.slideIndex_+1)*r);var h=t+o,a=i+o,l=this.isVertical_?0:-this.max_*this.containerWidth_,u=this.isVertical_?-this.max_*this.containerHeight_:0,c=Math.max(l,Math.min(h,0)),v=Math.max(u,Math.min(a,0));return null!==(s=this.carousel_)&&void 0!==s&&null!==(e=s.isLastSlideFullyVisible_)&&void 0!==e&&e.call(s)&&this.carousel_.isLastSlideFullyVisible_()&&n<0&&(this.isVertical_?this.isVertical_&&(v=Math.max(v,this.initPosition)):c=Math.max(c,this.initPosition)),{x:c,y:v}}},{key:"setDirect_",value:function(t){var i=this.initPosition,s=this.isVertical_?this.containerHeight_:this.containerWidth_,e=t+i,n=this.currentIndex*s;Math.abs(t)>=s*this.ratio_&&(this.direct=t>0?-1:1),(Math.abs(e)>n+s*this.ratio_||Math.abs(e)<n-s*this.ratio_)&&(this.direct=t>0?-1:1),this.shouldLoop_||(!this.slideIndex_&&t>0?this.direct=-1:this.slideIndex_===this.max_&&t<0&&(this.direct=1),this.slideIndex_>this.max_&&(this.direct=null))}},{key:"onDragStart",value:function(t){var i=t.targetTouches&&t.targetTouches[0]||t.changedTouches&&t.changedTouches[0];this.clearAutoplayTimer_(),this.initPosition=this.getTranslate_(),this.start_={clientX:"touchstart"===t.type?null==i?void 0:i.pageX:t.pageX,clientY:"touchstart"===t.type?null==i?void 0:i.pageY:t.pageY},this.setTouch_(!0),this.documentElement_.classList.add("i-spzhtml-carousel-scroll-disabled")}},{key:"onDragEnd",value:function(t,i){if(this.isTouched_&&this.element){var s=t.clientX?t:t.changedTouches[0],e=s.clientX,n=s.clientY;if(this.end_={clientX:e,clientY:n},i)this.calcAndCallback_(i);else{if(this.hasMove_())return SPZCore.Dom.toggleAttribute(this.element,"move",!1),void this.clearMove_();this.calcAndCallback_(),this.clearMove_()}}}},{key:"calcAndCallback_",value:function(t){if(!this.start_||!this.end_||!this.direct){var i,s,e,n,o=(null===(i=this.start_)||void 0===i?void 0:i.clientX)===(null===(s=this.end_)||void 0===s?void 0:s.clientX)||(null===(e=this.start_)||void 0===e?void 0:e.clientY)===(null===(n=this.end_)||void 0===n?void 0:n.clientY);return this.scroller({index:this.slideIndex_,animateTime:o?0:this.animateTime_}),void(!t&&SPZCore.Dom.toggleAttribute(this.element,"move",!1))}this.direct=this.direct*this.directionFactor_,-1===this.direct?this.pre_():this.next_(),this.direct=null}},{key:"parseTranslateX_",value:function(t,i){return this.isVertical_?0:void 0!==t?t/this.containerWidth_*100:(this.widthList||this.setContainerWidth_(),(1===this.visibleCount_?-i*this.widthList[0]:-this.getSumDistance_(0,i,this.widthList))/this.containerWidth_*100)}},{key:"parseTranslateY_",value:function(t,i){if(!this.isVertical_)return 0;if(void 0!==t)return t/this.containerHeight_*100;var s=Math.min(Math.max(i-1,0),this.slideWrappers_.length-1);return(1===this.visibleCount_?-i*this.container_.clientHeight:-i*this.slideWrappers_[s].clientHeight)/this.containerHeight_*100}},{key:"getTranslate_",value:function(){var t=this.isVertical_?"y":"x",i=null,s=SPZCore.Dom.computedStyle(this.win,this.container_);return window.WebKitCSSMatrix?((i=s.transform||s.webkitTransform).split(",").length>6&&(i=i.split(", ").map((function(t){return t.replace(",",".")})).join(", ")),transformMatrix=new window.WebKitCSSMatrix("none"===i?"":i)):(transformMatrix=s.MozTransform||s.OTransform||s.MsTransform||s.msTransform||s.transform||s.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),matrix=transformMatrix.toString().split(",")),"x"===t&&(i=window.WebKitCSSMatrix?transformMatrix.m41:16===matrix.length?parseFloat(matrix[12]):parseFloat(matrix[4])),"y"===t&&(i=window.WebKitCSSMatrix?transformMatrix.m42:16===matrix.length?parseFloat(matrix[13]):parseFloat(matrix[5])),i||0}},{key:"setContainerHeight_",value:function(t,i,s){if(this.element.layout_!==SPZCore.Layout.FIXED_HEIGHT||this.element.hasAttribute("auto-height"))if(this.element.hasAttribute("keep-height"))this.handleKeepHeight_();else{if(this.heightList||(this.heightList=this.slideWrappers_.map((function(t){return t.clientHeight}))),s)return SPZCore.Dom.setStyles(this.element,{"height":"auto"}),void(this.heightList=this.slideWrappers_.map((function(t){return t.clientHeight})));if(this.isVertical_||t||!this.element.hasAttribute("auto-height")){var e=this.slideWrappers_.map((function(t){return t.clientHeight}));if(this.visibleCount_=parseFloat(this.element.getAttribute("visible-count"))||1,(!t||1!=this.visibleCount_&&this.isVertical_)&&(this.isVertical_||t)){for(var n=this.getSumDistance_(0,this.visibleCount_,e),o=1;o<this.slideWrappers_.length-this.visibleCount_;o++)n=Math.max(n,this.getSumDistance_(o,o+this.visibleCount_,e));SPZCore.Dom.setStyles(this.element,{"height":"".concat(n,"px")})}else SPZCore.Dom.setStyles(this.element,{"height":"auto"})}else SPZCore.Dom.setStyles(this.element,{"height":"".concat(this.heightList[i]||this.element.clientHeight,"px")})}}},{key:"handleKeepHeight_",value:function(){var t=this;SPZCore.Dom.setStyles(this.element,{"min-height":"".concat(this.element.clientHeight,"px")});var i=SPZUtils.Event.listen(this.element,"transitionend",(function(s){E.includes(s.propertyName)&&(SPZCore.Dom.setStyles(t.element,{"min-height":""}),i())}))}},{key:"setContainerWidth_",value:function(){var t;if(!this.isVertical_){var i=(null===(t=this.slideWrappers_[0])||void 0===t?void 0:t.getBoundingClientRect().width)||0;this.widthList=new Array(this.slideWrappers_.length).fill(i)}}},{key:"initContainerRect_",value:function(){var t=this.container_.getBoundingClientRect(),i=t.height,s=t.width;this.containerWidth_=s,this.containerHeight_=i}},{key:"handleHeadToTail_",value:function(t,i){return this.shouldLoop_&&void 0!==t?null==this.slideIndex_||null===this.currentIndex?t+this.copySlideCount_:this.currentIndex+i:t}},{key:"getSumDistance_",value:function(t,i){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.heightList,e=function(t){return t.reduce((function(t,i){return t+i}),0)};return e(s.slice(t,i))}},{key:"setStyleTranslate_",value:function(t,i,s){var e=this,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=this.isIos_?"translate3d(".concat(t,"%, ").concat(i,"%, 0)"):"translate(".concat(t,"%, ").concat(i,"%)");SPZCore.Dom.setStyles(this.container_,{"transform":o,"transition-duration":"".concat(s,"ms")}),n||(s?(N.forEach((function(t){e["un".concat(t)]&&e["un".concat(t)]()})),N.forEach((function(t){e["un".concat(t)]=SPZUtils.Event.listen(e.container_,t,(function(){e.dispatchEvent_()}),{passive:!0})}))):this.dispatchEvent_())}},{key:"dispatchEvent_",value:function(){var t=SPZUtils.Event.create(this.win,"transitionend",{},{bubbles:!1});this.element.dispatchEvent(t)}},{key:"clearMove_",value:function(){this.documentElement_.classList.remove("i-spzhtml-carousel-scroll-disabled"),this.setTouch_(!1),this.direct=null,this.start_=this.end_=void 0}},{key:"hasMove_",value:function(){var t,i,s,e,n,o;return!this.isTouched_||!this.element||(null===(t=this.start_)||void 0===t?void 0:t.clientX)&&(null===(i=this.start_)||void 0===i?void 0:i.clientY)&&(null===(s=this.start_)||void 0===s?void 0:s.clientX)===(null===(e=this.end_)||void 0===e?void 0:e.clientX)&&(null===(n=this.start_)||void 0===n?void 0:n.clientY)===(null===(o=this.end_)||void 0===o?void 0:o.clientY)}},{key:"setTouch_",value:function(t){this.isTouched_=t}},{key:"toggleClass_",value:function(){var t,i,s=this,e=this.currentIndex||0,n=this.slideWrappers_.length-1;if(!(e<0||e>n)){var o=this.slideWrappers_.filter((function(t,i){return i!==e&&t.classList.contains(m)}))[0],r=this.slideWrappers_[e];null==r||null===(t=r.classList)||void 0===t||t.add(m),null==o||null===(i=o.classList)||void 0===i||i.remove(m),this.slideWrappers_.forEach((function(t,i){var n=Math.min(s.visibleCount_,s.slideWrappers_.length-e),o=i>=e&&i<e+n;t.classList.toggle("i-spzhtml-slide-item-visible",o)}))}}}])&&function(t,i){for(var s=0;s<i.length;s++){var e=i[s];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}(i.prototype,s),Object.defineProperty(i,"prototype",{writable:!1}),t}();var I=function(){function t(i){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this.currentIndex_=0,this.documentElement_=self.document.documentElement,this.element=i.element,this.initialSlideIndex_=i.initialSlideIndex_||0,this.isVertical_="vertical"===i.direct_,this.ratio_=i.ratio_||.01,this.slidesContainer_=i.slidesContainer_,this.slideDimensions_=[0],this.slideWrappers_=i.slideWrappers_,this.updateSelect_=i.updateSelect_.bind(i),this.updateMaxIndex_=i.updateMaxIndex_.bind(i),this.win=i.win,this.vsync_=SPZServices.vsyncFor(this.win),this.hasAutoplay_=i.hasAutoplay_,this.autoplayDelay_=i.autoplayDelay_,this.dispatchEvent_=i.dispatchEvent_.bind(i),this.count_=i.count_,this.useBodyScroll_=!1,this.initListener_(),this.initContainerRect_(),this.initScrollTo_(),this.setShowClass_()}var i,s;return i=t,(s=[{key:"setAutoPlayDir_",value:function(){this.slidesContainer_.scrollLeft>=this.maxScrollDistance_&&(this.dir_=-1),0===this.currentIndex_&&(this.dir_=1)}},{key:"getMaxScrollDistance_",value:function(){var t=this.slidesContainer_.scrollWidth-this.containerSize_,i=this.slidesContainer_.scrollHeight-this.containerSize_;return this.isVertical_&&0==i?(this.useBodyScroll_=!0,this.selectOrientationValue(this.containerSize_,t)):this.selectOrientationValue(i,t)}},{key:"initScrollTo_",value:function(){this.initialSlideIndex_>=0&&(this.currentIndex_=this.initialSlideIndex_,this.smoothScrollTo_(0))}},{key:"setSlideDimensions_",value:function(){var t=this,i=this.selectOrientationValue(this.slidesContainer_.scrollHeight,this.slidesContainer_.scrollWidth),s=this.slideWrappers_.reduce((function(i,s){return i.concat(t.getSlideDimensions_(s))}),[]),e=(i-s.reduce((function(t,i){return t+i}),0))/(this.slideWrappers_.length-1);this.slideWrappers_.forEach((function(i,n){t.slideDimensions_[n]=0===n?0:1===n?s[0]+e:t.slideDimensions_[n-1]+s[n-1]+e}))}},{key:"getSlideDimensions_",value:function(t){var i=t.offsetWidth,s=t.offsetHeight;return this.selectOrientationValue(s,i)}},{key:"initContainerRect_",value:function(){var t=this,i=this.slidesContainer_.getBoundingClientRect(),s=i.height,e=i.width;this.containerSize_=this.selectOrientationValue(s,e),this.maxScrollDistance_=this.getMaxScrollDistance_(),this.setSlideDimensions_();var n=this.slideDimensions_.findIndex((function(i){return i>=t.maxScrollDistance_}));this.maxIndex_=-1===n?this.slideDimensions_.length-1:n,this.updateMaxIndex_(this.maxIndex_),this.maxScrollDistance_&&this.element.classList.add("i-spzhtml-carousel-scrollable")}},{key:"findCurrentSlideIndex_",value:function(){var t=this.getCurrentScrollDistance_();return this.slideDimensions_.findIndex((function(i){return t<=i+1}))}},{key:"selectOrientationValue",value:function(t,i){return this.isVertical_?Math.round(t):Math.round(i)}},{key:"initListener_",value:function(){var t=this;SPZUtils.Event.listen(this.slidesContainer_,"scroll",SPZCore.Types.throttle(this.win,(function(){0===t.maxIndex_&&t.initContainerRect_();var i=t.findCurrentSlideIndex_();i!==t.currentIndex_&&(t.updateSelect_(i),t.currentIndex_=i,t.setShowClass_())}),100))}},{key:"setShowClass_",value:function(){var t=this,i=this.slideWrappers_.filter((function(i,s){return s!==t.currentIndex_&&i.classList.contains(m)}))[0];i&&i.classList.remove(m),(this.slideWrappers_[this.currentIndex_]||this.slideWrappers_[0]).classList.add(m)}},{key:"smoothScrollTo_",value:function(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:300,s=this.slideDimensions_[this.currentIndex_];if(this.isSupportSmoothScroll_())return this.getScrollElement_().scrollTo({left:s,top:s,behavior:i?"smooth":"auto"}),void SPZServices.timerFor(this.win).delay((function(){t.dispatchEvent_()}),i);var e=this.getCurrentScrollDistance_(),n=s-e;this.vsync_.runAnimMutateSeries(this.slidesContainer_,(function(s){var o=Math.min(s/i,1),r=e+n*o;return t.setScrollValue_(r),s>=i&&t.dispatchEvent_(),s<i}),i)}},{key:"getScrollElement_",value:function(){return this.useBodyScroll_?window:this.slidesContainer_}},{key:"getCurrentScrollDistance_",value:function(){return this.selectOrientationValue(this.slidesContainer_.scrollTop,this.slidesContainer_.scrollLeft)}},{key:"setScrollValue_",value:function(t){var i=this.isVertical_?"scrollTop":"scrollLeft";this.slidesContainer_[i]=t}},{key:"isSupportSmoothScroll_",value:function(){return void 0!==SPZCore.Dom.getStyle(self.document.documentElement,"scroll-behavior")}},{key:"isTouchDevice_",value:function(t){return t.targetTouches&&t.targetTouches[0]||t.changedTouches&&t.changedTouches[0]}},{key:"onDragStart",value:function(t){this.isTouchDevice_(t)||(this.start_=this.getDragEventPositionAndTime_(t),this.originIndex_=this.currentIndex_,this.initScroll_=this.getCurrentScrollDistance_(),this.documentElement_.classList.add(y))}},{key:"getDragEventPositionAndTime_",value:function(t){return{clientX:t.clientX,clientY:t.clientY,timer:Date.now()}}},{key:"onDragMove",value:function(t){if(!this.isTouchDevice_(t)){var i=this.getMoveEventDistance_(t);this.setScrollValue_(i)}}},{key:"getMoveEventDistance_",value:function(t){return this.selectOrientationValue(this.initScroll_+(this.start_.clientY-t.clientY),this.initScroll_+(this.start_.clientX-t.clientX))}},{key:"onDragEnd",value:function(t){this.isTouchDevice_(t)||t.target===this.slidesContainer_||(this.end_=this.getDragEventPositionAndTime_(t),this.currentIndex_=this.originIndex_,this.calcAndCallback_(),this.documentElement_.classList.remove(y))}},{key:"calcAndCallback_",value:function(){this.start_&&this.end_?(this.setCurrentIndex_(),this.smoothScrollTo_(),this.start_=this.end_=void 0):SPZCore.Dom.toggleAttribute(this.element,"move",!1)}},{key:"setCurrentIndex_",value:function(){this.currentIndex_=this.getUpdateIndex_()}},{key:"getUpdateIndex_",value:function(){var t=this.getMoveDistanceAndTime_(),i=t.distance,s=t.timer;if(Math.abs(i)>this.containerSize_*this.ratio_||s<300){if(i<1&&i>-1)return;return i>1?this.currentIndex_-1:this.currentIndex_+1}return this.currentIndex_}},{key:"getMoveDistanceAndTime_",value:function(){return{distance:this.selectOrientationValue(this.end_.clientY-this.start_.clientY,this.end_.clientX-this.start_.clientX),timer:this.end_.timer-this.start_.timer}}},{key:"update",value:function(t){this.slideWrappers_=t.slideWrappers,this.slidesContainer_=t.slidesContainer}},{key:"swipe",value:function(t){(t.isUpdate||0===this.maxIndex_)&&this.initContainerRect_(),this.currentIndex_=this.getCurrentIndex_(t),this.currentIndex_!==this.maxIndex_&&0!==this.currentIndex_||this.updateSelect_(this.currentIndex_),this.smoothScrollTo_()}},{key:"getCurrentIndex_",value:function(t){var i=t.index;return t.opt_autoplay?(this.setAutoPlayDir_(),this.currentIndex_+this.dir_):i>=this.maxIndex_?this.maxIndex_:i<0?0:i}}])&&function(t,i){for(var s=0;s<i.length;s++){var e=i[s];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}(i.prototype,s),Object.defineProperty(i,"prototype",{writable:!1}),t}();var A=["spz-video","spz-img","spz-model-viewer","ljs-video","ljs-img","ljs-model-viewer"],L=function(){function i(t,s){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,i),this.action_=t.action_,this.viewport_=t.getViewport(),this.zoomElement_=t.element,this.calcControlPosition_=t.attemptToFit_.bind(t),this.zoomCallback_=s,this.setup_()}var s,e;return s=i,(e=[{key:"setup_",value:function(){this.zoomElement_&&this.zoomElement_.hasAttribute("zoom")&&(this.closeSvg=Z(this.zoomElement_,"close"),SPZUtils.Event.listen(this.zoomElement_,"click",this.open_.bind(this)))}},{key:"open_",value:function(t){this.zoomElement_.hasAttribute("zoom-in")||this.zoomElement_.hasAttribute("move")||(this.setImgAutoFit_(t.target),this.action_.trigger(this.zoomElement_,"zoomIn"),SPZCore.Dom.toggleAttribute(this.zoomElement_,"zoom-in",!0),this.renderCloseBtn_(),this.zoom_(),this.viewport_.enterOverlayMode(),this.calcControlPosition_(),this.zoomCallback_({animateTime:0}))}},{key:"close_",value:function(){SPZCore.Dom.toggleAttribute(this.zoomElement_,"zoom-in",!1),this.unListenClose_&&this.unListenClose_(),this.zoomElement_.removeChild(this.closeEle_),this.handleChildZoomCallback(!1),this.viewport_.leaveOverlayMode(),this.calcControlPosition_(),this.zoomCallback_({animateTime:0})}},{key:"zoom_",value:function(){this.handleChildZoomCallback(!0)}},{key:"renderCloseBtn_",value:function(){var t=this;this.closeEle_=document.createElement("div"),this.closeEle_.classList.add("close"),this.closeEle_.innerHTML=this.closeSvg,this.zoomElement_.appendChild(this.closeEle_),this.unListenClose_=SPZUtils.Event.listen(this.closeEle_,"click",(function(i){i.preventDefault(),i.stopPropagation(),t.close_(),t.action_.trigger(t.zoomElement_,"zoomOut")}))}},{key:"handleChildZoomCallback",value:function(){var i=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];SPZCore.Dom.scopedQuerySelectorAll(this.zoomElement_,A.join(",")).forEach((function(s){t.whenApiDefined(s).then((function(t){t.onEnterFullscreen&&t.onEnterFullscreen(i)}))}))}},{key:"setImgAutoFit_",value:function(t){var i=t.parentElement;"SPZ-IMG"!==i.tagName&&"LJS-IMG"!==i.tagName||i.getApi((function(){return api.setSrc&&api.setSrc()}))}}])&&function(t,i){for(var s=0;s<i.length;s++){var e=i[s];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}(s.prototype,e),Object.defineProperty(s,"prototype",{writable:!1}),i}();var N=["transitionend","webkitTransitionEnd","oTransitionEnd"],U="scroller",F="swipe",R=function(){function t(i){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this.carousel_=i,this.element=i.element,this.container_=i.slidesContainer_,this.effectType_=i.effectType_,this.autoplay_=i.autoplay_.bind(i),this.dispatchEvent_=i.dispatchEvent_.bind(i),this.shouldAutoplay_=i.shouldAutoplay_,this.win=i.win,this.initEffect_(),this.initEvent_(),(i.shouldLoop_&&i.noOfSlides_>1||!i.hasLoop_)&&this.setup_()}var i,s;return i=t,(s=[{key:"createDebugInfo_",value:function(){if(!this.debugInfoEl_){try{var t=SPZCore.Dom.computedStyle(this.win,this.element).position;t&&"static"!==t||SPZCore.Dom.setStyle(this.element,"position","relative")}catch(t){}var i=this.win.document.createElement("div");i.setAttribute("data-spz-debug","carousel-info"),SPZCore.Dom.setStyles(i,{position:"absolute",left:"8px",top:"8px",zIndex:9999,background:"rgba(0,0,0,0.6)",color:"#fff",fontSize:"10px",padding:"6px 8px",borderRadius:"6px",pointerEvents:"none",userSelect:"none"}),i.textContent="x差异: — | y差异: — | preventDefault: —",this.element.appendChild(i),this.debugInfoEl_=i}}},{key:"updateDebugInfo_",value:function(t,i,s){if(this.debugInfoEl_){var e=Math.abs(i);this.debugInfoEl_.textContent="x差异: ".concat(Math.round(t)," | y差异: ").concat(Math.round(e)," | preventDefault: ").concat(s?"是":"否")}}},{key:"initEffect_",value:function(){this.effectType_===U?(this.scroller_=new D(this.carousel_),this.effect_=this.scroller_):this.effectType_===F?(this.swipe_=new I(this.carousel_),this.effect_=this.swipe_):(this.fade_=new T(this.carousel_),this.effect_=this.fade_),this.zoom_=new L(this.carousel_,this.effect.bind(this,{isUpdate:!0}))}},{key:"initEvent_",value:function(){var t=this;this.initEventName_(),this.onDragStart_=function(i){t.start_=t.getPointerEventPosition_(i),t.unListenMove&&t.unListenMove(),t.unListenMove=SPZUtils.Event.listen(t.container_,t.moveEventName_,t.onDragMove_.bind(t.effect_),{passive:!1}),t.effect_.onDragStart(i)},this.onDragMove_=function(i){console.log(t.moveEventName_,2222);var s=t.getPointerEventPosition_(i),e=s.pageX,n=s.pageY,o=Math.abs(e-t.start_.pageX),r=Math.abs(n-t.start_.pageY);if(o<1&&r<1)console.log("returning");else{var h=o>r&&r<10;t.isSupportTouch_()&&h&&(console.log(222,"preventDefault called"),console.log("e",i),i.preventDefault()),t.element.setAttribute("dragging",""),t.effect_.onDragMove(i)}},this.onDragEnd_=function(i,s){t.effect_.onDragEnd(i,s),t.element.removeAttribute("dragging"),t.shouldAutoplay_&&t.resumeAutoplay_()},SPZUtils.Event.listen(this.container_,"wheel",SPZCore.Types.throttle(this.win,this.resumeAutoplay_.bind(this),300))}},{key:"getPointerEventPosition_",value:function(t){var i=t.targetTouches&&t.targetTouches[0]||t.changedTouches&&t.changedTouches[0];return{pageX:t.type.includes("touch")?null==i?void 0:i.pageX:t.pageX,pageY:t.clientY?t.pageY:null==i?void 0:i.pageY}}},{key:"resumeAutoplay_",value:function(){this.autoplay_(),this.dispatchEvent_()}},{key:"initEventName_",value:function(){this.startEventName_=this.isSupportTouch_()?"touchstart":"pointerdown",this.moveEventName_=this.isSupportTouch_()?"touchmove":"pointermove",this.endEventName_=this.isSupportTouch_()?"touchend":"pointerup"}},{key:"isSupportTouch_",value:function(){return!!("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch)}},{key:"setup_",value:function(){var t=this;this.element.hasAttribute("disabled-scroller")||(this.createDebugInfo_(),SPZUtils.Event.listen(this.container_,this.startEventName_,this.onDragStart_.bind(this.effect_),{passive:!0}),SPZUtils.Event.listen(this.container_,this.endEventName_,this.onDragEnd_.bind(this.effect_),{passive:!0}),SPZUtils.Event.listen(self.document,this.endEventName_,(function(i){t.unListenMove&&(t.unListenMove(),t.unListenMove=null,t.onDragEnd_.bind(t.effect_)(i,!0))}),{passive:!0}))}},{key:"effect",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object.assign(t,i),this.effectType_===U?this.scroller_.scroller(t):this.effectType_===F?this.swipe_.swipe(t):this.fade_.fade(t)}},{key:"update",value:function(t){var i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.effect_.update(t),t.isUpdate=i,i&&this.effect(t)}}])&&function(t,i){for(var s=0;s<i.length;s++){var e=i[s];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}(i.prototype,s),Object.defineProperty(i,"prototype",{writable:!1}),t}();function B(t){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function W(t){return function(t){if(Array.isArray(t))return Y(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,i){if(t){if("string"==typeof t)return Y(t,i);var s=Object.prototype.toString.call(t).slice(8,-1);return"Object"===s&&t.constructor&&(s=t.constructor.name),"Map"===s||"Set"===s?Array.from(t):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?Y(t,i):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y(t,i){(null==i||i>t.length)&&(i=t.length);for(var s=0,e=new Array(i);s<i;s++)e[s]=t[s];return e}function H(t,i){return(H=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,i){return t.__proto__=i,t})(t,i)}function X(t,i){if(i&&("object"===B(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function G(t){return(G=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var J="spz-carousel",V=void 0,q="scroller",$=["SPZ-IMG","IMG","LJS-IMG"],K=function(s){!function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),i&&H(t,i)}(m,s);var e,n,o,h,u=(o=m,h=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,i=G(o);if(h){var s=G(this).constructor;t=Reflect.construct(i,arguments,s)}else t=i.apply(this,arguments);return X(this,t)});function m(t){var i;return function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,m),(i=u.call(this,t)).slides_=[],i.noOfSlides_=0,i.originalNoOfSlides_=0,i.slidesContainer_=null,i.slideWrappers_=[],i.autoplayTimeoutId_=null,i.hasAutoplay_=!1,i.autoplayDelay_=5e3,i.shouldLoop_=!1,i.shouldAutoplay_=!1,i.slideIndex_=null,i.initialSlideIndex_=0,i.action_=SPZServices.actionServiceForDoc(i.element),i.controls_=null,i.effectType_=q,i.animateTime_=300,i.element.unmounted_=!1,i.element.childIds_=[],i.lastSlideFullyVisible_=!1,i.lastObservedElement_=null,i.autoAttributes_={"visible-count":!1,"advance-count":!1},i}return e=m,(n=[{key:"isLayoutSupported",value:function(t){return SPZCore.isLayoutSizeDefined(t)||t==SPZCore.Layout.CONTAINER}},{key:"buildCallback",value:function(){this.templates_=SPZServices.templatesForDoc()}},{key:"mountCallback",value:function(){return this.calculatePending_&&this.resize_(),i||(i=Promise.resolve(void 0))}},{key:"unmountCallback",value:function(){var t,i,s;this.clearAutoplayTimer_(),this.cancelCopyTask_(),null===(t=this.unObserver_)||void 0===t||t.call(this),null===(i=this.mediaQueryProps_)||void 0===i||i.dispose(),null===(s=this.lastSlideObserver_)||void 0===s||s.call(this)}},{key:"layoutCallback",value:function(){var t=this;this.init_();var i=this.element.getAttribute("advance-count"),s=this.element.getAttribute("visible-count");"auto"===i||"auto"===s?SPZServices.timerFor(this.win).delay((function(){t.recalculateCounts_(),t.finishLayoutCallback_()}),0):(this.applyCountsToDOM_(),this.finishLayoutCallback_())}},{key:"finishLayoutCallback_",value:function(){this.effect_=new R(this),this.effectType_===q&&this.shouldLoop_&&this.effect_.effect({index:0,animateTime:0}),this.initSlide_()}},{key:"init_",value:function(){if(this.initDom_(),this.initMediaProps_(),this.element.hasAttribute("animate-time")){var t=Number(this.element.getAttribute("animate-time"));this.animateTime_=isNaN(t)?300:t}this.hasAutoplay_=this.element.hasAttribute("autoplay"),this.hasAutoplay_&&!this.element.hasAttribute("loop")&&this.element.setAttribute("loop",""),this.hasLoop_=this.element.hasAttribute("loop"),this.shouldAutoplay_=this.hasAutoplay_&&this.isLoopingEligible(),this.shouldAutoplay_&&!this.hasLoop_&&(this.element.setAttribute("loop",""),this.hasLoop_=!0);var i="rtl"===document.documentElement.getAttribute("dir");if(this.directionFactor=i?-1:1,this.element.hasAttribute("initial-slide")){var s=this.mediaQueryProps_.resolveMatchQuery(this.assert(this.element.getAttribute("initial-slide"),"Given slide-index should not be empty.",this.element));this.initialSlideIndex_=isNaN(s)?this.findSlideIndex_(s,!0):parseInt(s,10)}this.element.hasAttribute("effect")&&(this.effectType_=this.element.getAttribute("effect")),this.element.hasAttribute("scroll-ratio")&&(this.ratio_=parseFloat(this.element.getAttribute("scroll-ratio"))),this.element.hasAttribute("direct")&&(this.direct_=this.element.getAttribute("direct")),this.max_=this.slides_.length,this.count_=this.slides_.length,this.shouldLoop_=this.hasLoop_&&this.isLoopingEligible(),this.setupBehavior_()}},{key:"initMediaProps_",value:function(){var t=this,i=this.element.getAttribute("advance-count"),s=this.element.getAttribute("visible-count"),e=this.element.getAttribute("row-count");this.getViewport().onResize((function(){t.resize_()})),this.mediaQueryProps_=new SPZCore.Dom.MediaQueryProps(this.win,(function(){t.recalculateCounts_(),t.triggerActionByName_("mediaChange",t.slideIndex_)})),this.initializeCounts_(i,s),e&&(this.rowCount_=Number(this.mediaQueryProps_.resolveMatchQuery(e)),this.element.setAttribute("row-count",this.rowCount_))}},{key:"initializeCounts_",value:function(t,i){if(this.autoAttributes_["advance-count"]="auto"===t,this.autoAttributes_["visible-count"]="auto"===i,t&&"1"!==t)if("auto"===t)this.advanceCount_="auto";else{var s=this.mediaQueryProps_.resolveMatchQuery(t);this.advanceCount_=Number(s)}else this.advanceCount_=1,this.element.setAttribute("advance-count","1");if(i)if("auto"===i)this.visibleCount_="auto";else{var e=this.mediaQueryProps_.resolveMatchQuery(i);this.visibleCount_=parseFloat(e)}else this.visibleCount_=1,this.element.setAttribute("visible-count","1")}},{key:"recalculateCounts_",value:function(){var t=this,i=arguments.length>0&&void 0!==arguments[0]&&arguments[0],s=!1;["visible-count","advance-count"].forEach((function(e){if(t.autoAttributes_[e]){var n=t.calculateCount_(i);"visible-count"===e?n!==t.visibleCount_&&(t.visibleCount_=n,t.element.setAttribute("visible-count",n),s=!0):n!==t.advanceCount_&&(t.advanceCount_=n,t.element.setAttribute("advance-count",n),s=!0)}else{var o=t.element.getAttribute(e)||1,r=t.mediaQueryProps_.resolveMatchQuery(o),h="visible-count"===e?parseFloat(r):Number(r);"visible-count"===e?h!==t.visibleCount_&&(t.visibleCount_=h,t.element.setAttribute("visible-count",h),s=!0):h!==t.advanceCount_&&(t.advanceCount_=h,t.element.setAttribute("advance-count",h),s=!0)}})),s&&this.applyCountsToDOM_(),this.updateEffectAfterCountsChange_()}},{key:"updateEffectAfterCountsChange_",value:function(){var t;null===(t=this.effect_)||void 0===t||t.update({slideWrappers:this.slideWrappers_,slidesContainer:this.slidesContainer_,max:this.slides_.length,index:this.slideIndex_,visibleCount:this.visibleCount_})}},{key:"calculateCount_",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=this.getContainerAndContentSize_(),s=i.containerSize,e=i.contentSize;if(s<=0||e<=0)return t&&(this.calculatePending_=!0),1;var n=Math.floor(s/e),o=Math.max(1,Math.min(n,this.originalNoOfSlides_));return this.calculatePending_=!1,o}},{key:"getContainerAndContentSize_",value:function(){var t,i="vertical"===this.element.getAttribute("direct"),s=i?this.element.clientHeight:this.element.clientWidth;if(s<=0||null===(t=this.slides_)||void 0===t||!t.length)return{containerSize:0,contentSize:0};var e=0,n=this.advanceCount_||1,o=this.element.querySelector(".".concat(l));if(o)e=i?o.clientHeight:o.clientWidth;else if(1===n){var r,h=null===(r=this.slideWrappers_)||void 0===r?void 0:r[0];e=h?i?h.clientHeight:h.clientWidth:0}else{var a=this.slides_[0],u=null==a?void 0:a[0];e=u?i?u.clientHeight:u.clientWidth:0}return{containerSize:s,contentSize:e}}},{key:"initDom_",value:function(){var t,i,s,e,n=this;this.basicDomData_=(t=this.element,i=function(t){return SPZCore.Dom.realChildElements(t).filter((function(t){return!(t.hasAttribute("pre")||t.hasAttribute("next")||t.hasAttribute("close")||"copy"===t.getAttribute("role"))}))}(t),s=i.length,e=function(t,i){var s=t.hasAttribute("i-spzhtml-ssr")?function(t){var i=SPZCore.Dom.scopedQuerySelector(t,".".concat(p)),s=SPZCore.Types.toArray(SPZCore.Dom.scopedQuerySelectorAll(t,".".concat(c))).filter((function(t){return!t.classList.contains(v)})),e=[];return s.forEach((function(t){var i=SPZCore.Types.toArray(SPZCore.Dom.scopedQuerySelectorAll(t,".".concat(l,", .").concat(d)));e.push(i)})),{slidesContainer:i,slideWrappers:s,slides:e}}(t):function(t,i){t.classList.add("i-spzhtml-slidescroll");var s=t.ownerDocument.createElement("div");s.setAttribute("tabindex","-1"),s.classList.add(p),s.setAttribute("aria-live","polite"),t.appendChild(s);var e=z(t,i,s,!1),n=e.slideWrappers;return{slidesContainer:s,slides:e.slides,slideWrappers:n}}(t,i),e=s.slideWrappers,n=s.slides,o=s.slidesContainer;if(!x(t))return{slidesContainer:o,slides:n,slideWrappers:e};var r=Number(t.getAttribute("visible-count"))||1;return{slidesContainer:o,slides:n,slideWrappers:C(t,e,o,r)}}(t,i),r(r({},function(t,i){if(!t.classList.contains(a))return t.hasAttribute("controls")&&t.classList.add(a),{prevButton:k(t,{outerHTML:Z(t,"pre"),className:"spz-carousel-button-prev",enabled:t.hasAttribute("loop")}),nextButton:k(t,{outerHTML:Z(t,"next"),className:"spz-carousel-button-next",enabled:i>(Number(t.getAttribute("advance-count"))||1)})}}(t,s)),e)),this.slides_=this.basicDomData_.slides,this.originalNoOfSlides_=this.slides_.length,this.slidesContainer_=this.basicDomData_.slidesContainer,this.slideWrappers_=this.basicDomData_.slideWrappers,this.prevButton_=this.basicDomData_.prevButton,this.nextButton_=this.basicDomData_.nextButton,this.controls_=new j({element:this.element,go:function(t,i,s){n.go(t,i,s,!0)},nextButton:this.nextButton_,prevButton:this.prevButton_}),this.noOfSlides_=this.slides_.length,this.element.setAttribute("dom-mounted","")}},{key:"resetToBasicDOM_",value:function(){if(this.basicDomData_){for(;this.slidesContainer_.firstChild;)this.slidesContainer_.removeChild(this.slidesContainer_.firstChild);var t=this.basicDomData_.slides.flat(),i=z(this.element,t,this.slidesContainer_,!0),s=i.slideWrappers,e=i.slides;this.slides_=e,this.slideWrappers_=s,this.noOfSlides_=this.slides_.length,this.originalNoOfSlides_=this.noOfSlides_}}},{key:"applyCountsToDOM_",value:function(){if(this.basicDomData_){var t,i=this.visibleCount_||1,s=this.advanceCount_||1;!this.element.hasAttribute("i-spzhtml-ssr")||this.element.hasAttribute("ssr-advance-count")&&Number(this.element.getAttribute("ssr-advance-count"))!==s?(this.resetToBasicDOM_(),t=function(t,i,s,e){var n=t.slideWrappers,o=t.slides,r=t.slidesContainer,h=i.hasAttribute("i-spzhtml-ssr");if(s>1){var a=function(t,i,s,e){return e<=1?{slideWrappers:t,slides:i}:(t.filter((function(t){return t.parentNode===s})).forEach((function(t){s.removeChild(t)})),function(){if(i.some((function(t){return t.some((function(t){return t.classList.contains(d)}))}))){var n=M(t,e),o=[],r=[];return n.forEach((function(t){for(var i=t[0],e=1;e<t.length;e++)for(;t[e].firstChild;)i.appendChild(t[e].firstChild);s.appendChild(i),o.push(i);var n=SPZCore.Types.toArray(SPZCore.Dom.scopedQuerySelectorAll(i,".".concat(f)));r.push(n)})),{slideWrappers:o,slides:r}}var h=M(i.flat(),e),a=[],l=[];return h.forEach((function(t){for(var i=t[0].parentElement,e=1;e<t.length;e++)i.appendChild(t[e]);s.appendChild(i),a.push(i),l.push(t)})),{slideWrappers:a,slides:l}}())}(n,o,r,s);n=a.slideWrappers,o=a.slides}return!h&&x(i)&&e>0&&(n=C(i,n,r,e)),{slideWrappers:n,slides:o,slidesContainer:r}}({slides:this.slides_,slideWrappers:this.slideWrappers_,slidesContainer:this.slidesContainer_},this.element,s,i)):t={slides:this.slides_,slideWrappers:this.slideWrappers_,slidesContainer:this.slidesContainer_},this.slides_=t.slides,this.slideWrappers_=t.slideWrappers,this.slidesContainer_=t.slidesContainer,this.noOfSlides_=this.slides_.length,this.max_=this.noOfSlides_,this.count_=this.noOfSlides_,null!==this.slideIndex_&&(this.slideIndex_>=this.noOfSlides_?this.slideIndex_=this.noOfSlides_-1:this.slideIndex_<0&&(this.slideIndex_=0)),this.effect_&&this.effect_.update({slideWrappers:this.slideWrappers_,slidesContainer:this.slidesContainer_,max:this.slides_.length,index:this.slideIndex_,visibleCount:this.visibleCount_}),this.updateLastSlideVisibility_()}}},{key:"initSlide_",value:function(){null===this.slideIndex_&&this.showSlide_(this.initialSlideIndex_,!1),this.triggerActionByName_("mounted",this.slideIndex_)}},{key:"setupBehavior_",value:function(){var t=this;this.registerAction("goToSlide",this.handleSlide_.bind(this)),this.registerAction("updateDirect",(function(i){var s;return t.updateDirect_(null===(s=i.args)||void 0===s?void 0:s.direct)})),this.registerAction("updateCount",(function(i){var s,e;return t.updateCount_(null===(s=i.args)||void 0===s?void 0:s.count,null===(e=i.args)||void 0===e?void 0:e.isZoom)})),this.registerAction("goPrev",(function(){return t.go(-1,!0,!1,!0)})),this.registerAction("goNext",(function(){return t.go(1,!0,!1,!0)})),this.registerAction("calcPosition",(function(){return t.attemptToFit_()})),this.loadPromise(self).then((function(){t.shouldAutoplay_&&t.setupAutoplay_(),"swipe"===t.effectType_?t.setAsContainer(t.slidesContainer_,"50% 200%"):t.setAsContainer(t.element,"50% 100%"),t.loadedCallback_()}))}},{key:"handleSlide_",value:function(t){var i=this,s=t.args,e=s.path,n=s.animate,o=s.index||0,r=s.isScrollIntoView||!1;(o!=this.slideIndex_||e)&&(e?this.findSlideIndex_(e).then((function(t){if(r){var e=i.slideWrappers_[t];e&&i.getViewport().animateScrollIntoView(e,{pos:"center"})}else i.goToSlide(t||0,n,i.getDirect_(t,s))})):this.goToSlide(o,n,this.getDirect_(o,s)))}},{key:"getDirect_",value:function(t,i){var s=i.animate,e=i.direct;return!s||e?e:t<this.slideIndex_?-1:1}},{key:"findSlideIndex_",value:function(i){var s=this,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=i.lastIndexOf(".");n>-1&&(i=i.substring(0,n));var o=function(){return s.slides_.findIndex((function(t){var e;return null===(e=s.getSrc_(t))||void 0===e?void 0:e.some((function(t){return-1!==(null==t?void 0:t.lastIndexOf(i))}))}))};return e?o():t.whenDefined(this.element).then((function(){return s.element.whenBuilt().then((function(){return o()}))}))}},{key:"getSrc_",value:function(t){var i=function(i){return t.map((function(t){var s=i?SPZCore.Dom.scopedQuerySelector(t,i):t;return(null==s?void 0:s.getAttribute("poster"))||(null==s?void 0:s.getAttribute("src"))})).filter((function(t){return t}))},s=i();if(s.length)return s;var e=i("spz-img, ljs-img");return e.length||(e=i("spz-video, ljs-video")),e.length||(e=i("spz-model-view, ljs-model-view")),e}},{key:"isLoopingEligible",value:function(){return this.noOfSlides_>1}},{key:"go",value:function(t,i,s){var e=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=this.element.hasAttribute("pause");n&&!e||this.moveSlide(t,i,s),s?(this.autoplay_(),n&&this.dispatchEvent_()):this.clearAutoplayTimer_()}},{key:"hasPrev_",value:function(){return this.shouldLoop_||this.slideIndex_>0}},{key:"hasNext_",value:function(){return!!this.shouldLoop_||!this.isLastSlideFullyVisible_()}},{key:"isLastSlideFullyVisible_",value:function(){return this.lastSlideFullyVisible_}},{key:"calculatePaddingRatio_",value:function(t){if(!t)return 0;var i="vertical"===this.element.getAttribute("direct"),s=SPZCore.Dom.computedStyle(this.win,t);if(i){var e=parseFloat(s.paddingTop)||0,n=parseFloat(s.paddingBottom)||0,o=t.clientHeight;return o<=0?0:(e+n)/o}var r=parseFloat(s.paddingLeft)||0,h=parseFloat(s.paddingRight)||0,a=t.clientWidth;return a<=0?0:(r+h)/a}},{key:"updateLastSlideVisibility_",value:function(){var t=this;if(this.slideWrappers_&&0!==this.slideWrappers_.length){var i=this.getLastNonCopySlideWrapper_();if(i){if(!this.lastSlideObserver_||this.lastObservedElement_!==i){this.lastSlideObserver_&&this.lastSlideObserver_(),this.lastObservedElement_=i;var s=this.calculatePaddingRatio_(i),e=this.calculatePaddingRatio_(this.element),n=Math.max(.8,.98-s-e),o=SPZCore.Types.debounce(this.win,(function(i){var s=i.intersectionRatio>=n;t.lastSlideFullyVisible_!==s&&(t.lastSlideFullyVisible_=s,t.updateControlsStateImmediately_())}),16);this.lastSlideObserver_=SPZCore.observeIntersections(i,o,{threshold:n,root:this.element})}}else this.lastSlideFullyVisible_=!1}else this.lastSlideFullyVisible_=!1}},{key:"updateControlsStateImmediately_",value:function(){var t=this;this.controls_&&this.mutateElement((function(){t.controls_.setControlsState({prev:t.hasPrev_(),next:t.hasNext_()})}))}},{key:"getLastNonCopySlideWrapper_",value:function(){if(!this.slideWrappers_)return null;for(var t=this.slideWrappers_.length-1;t>=0;t--){var i=this.slideWrappers_[t];if(!i.classList.contains("i-spzhtml-slide-item-copy"))return i}return null}},{key:"moveSlide",value:function(t,i,s){if(null!==this.slideIndex_){var e=1===t?this.getNextIndex_(this.slideIndex_):this.getPrevIndex_(this.slideIndex_);null!==e?this.showSlideAndTriggerAction_(e,i,t,void 0,s):this.effect_.effect({index:this.slideIndex_,animateTime:this.animateTime_,opt_autoplay:s})}}},{key:"goToSlide",value:function(t,i,s){var e=parseInt(t,10);!isFinite(e)||e<0||e>=this.noOfSlides_?this.logger().warn(J,"Invalid [slide] value: ",t):null!==this.slideIndex_?this.showSlideAndTriggerAction_(e,i,s,!0):this.initialSlideIndex_=e}},{key:"getPrevIndex_",value:function(t){return t-1>=0?t-1:this.shouldLoop_?this.max_-1:null}},{key:"getNextIndex_",value:function(t){return t+1<this.max_?t+1:this.shouldLoop_?0:null}},{key:"showSlide_",value:function(t,i){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:V,e=arguments.length>3?arguments[3]:void 0,n=arguments.length>4?arguments[4]:void 0,o=this.noOfSlides_;return!(t<0||t>=o||this.slideIndex_==t||this.showProcessing_)&&this.handleShowSlide_(t,i,s,e,n)}},{key:"handleShowSlide_",value:function(t,i){var s=this,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:V,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4?arguments[4]:void 0,r=this.slides_[t];if(void 0===r)return this.logger().warn(J,"Attempting to access a non-existant slide %s / %s",t,this.noOfSlides_),!1;this.slideIndex_=t,this.slidesContainer_.setAttribute("select",this.slideIndex_),this.showProcessing_=!0,this.updateControlsStateImmediately_();var h=function(){s.showProcessing_=!1,s.triggerActionByName_("slideEnd",t),s.attemptToFit_()};return this.effect_.effect({slideIndex:t,index:t,animateTime:i?this.animateTime_:0,dir:e,animate:i,isUpdate:n,opt_autoplay:o}),h(),this.updateLastSlideVisibility_(),!0}},{key:"attemptToFit_",value:function(){var i=this;if(this.element.hasAttribute("controls")){var s=function(){i.mutateElement((function(){return i.calcPrePosition_()}))};if(this.slidesContainer_){var e=this.getStartEndEle_(),n=e.nextEleList,o=e.preEleList;[].concat(W(o),W(n)).filter((function(t){return!(null!=t&&t.isMount&&t.isMount())})).map((function(i){return t.whenDefined(i).then((function(){return i.whenMounted()}))})).forEach((function(t){return t.then((function(){return s()}))}))}return s()}}},{key:"calcPrePosition_",value:function(){var t=this.slideIndex_;if(this.slideWrappers_[t]){var i=SPZCore.Dom.scopedQuerySelector(this.slideWrappers_[t],"spz-img, ljs-img"),s=this.getStartEndEle_(),e=s.nextInfo,n=s.preInfo;if(SPZCore.Dom.toggleAttribute(this.element,"image",!!i),this.element.hasAttribute("zoom-in")||!e.height&&!n.height)return SPZCore.Dom.setStyle(this.prevButton_,"top","50%"),void SPZCore.Dom.setStyle(this.nextButton_,"top","50%");var o=n.height>e.height?n:e;if(o.height){var r="".concat(o.height/2+this.getOffsetTop_(o.maxEle),"px");SPZCore.Dom.setStyle(this.prevButton_,"top",r),SPZCore.Dom.setStyle(this.nextButton_,"top",r)}}}},{key:"getStartEndEle_",value:function(){var t=this.slideIndex_,i=SPZCore.Dom.scopedQuerySelectorAll(this.slideWrappers_[t],"spz-img, ljs-img");i||(i=SPZCore.Dom.scopedQuerySelectorAll(this.slideWrappers_[t],"spz-video, ljs-video"));var s=t;s>=this.slideWrappers_.length&&(s=this.slideWrappers_.length-1);var e=SPZCore.Dom.scopedQuerySelectorAll(this.slideWrappers_[s],"spz-img, ljs-img");e||(e=SPZCore.Dom.scopedQuerySelectorAll(this.slideWrappers_[s],"spz-video, ljs-video"));var n=function(t){var i=0,s=null;return t.forEach((function(t){var e=t.clientHeight;e>=i&&(s=t,i=e)})),{height:i,maxEle:s}};return{preEleList:i=SPZCore.Types.toArray(i),nextEleList:e=SPZCore.Types.toArray(e),preInfo:n(i),nextInfo:n(e)}}},{key:"getOffsetTop_",value:function(t){for(var i=t.offsetTop,s=t.offsetParent;null!==s;){if("SPZ-CAROUSEL"===s.tagName||"LJS-CAROUSEL"===s.tagName)return i;i+=s.offsetTop,s=s.offsetParent}return i}},{key:"showSlideAndTriggerAction_",value:function(t,i,s,e,n){this.showSlide_(t,i,s,e,n)&&this.triggerActionByName_("slideChange",t)}},{key:"triggerBindingElements_",value:function(){var i=this,s=this.element.getAttribute("id"),e=this.element.ownerDocument.querySelector('[carousel-id="'.concat(s,'"]'));e&&t.whenApiDefined(e).then((function(t){t&&t.changeActive&&t.changeActive(i.slideIndex_)}))}},{key:"getData",value:function(){var t=this;return this.element.whenLoaded().then((function(){return{slideLength:t.slides_.length,slideActive:t.slideIndex_}}))}},{key:"triggerActionByName_",value:function(t,i){var s,e,n,o,r,h=this.slides_[i];Array.isArray(h)&&(h=h[0]);var a=SPZUtils.Event.create(this.win,"spz-carousel.".concat(t),{id:this.element.id,index:i,path:(null===(s=h)||void 0===s?void 0:s.getAttribute("src"))||(null===(e=h)||void 0===e||null===(n=e.querySelector("spz-img, ljs-img"))||void 0===n?void 0:n.getAttribute("src")),tagName:null===(o=h)||void 0===o?void 0:o.tagName,isImage:$.includes(null===(r=h)||void 0===r?void 0:r.tagName),total:this.slides_.length});this.action_.trigger(this.element,t,a,{bubbles:!1}),"slideChange"===t&&this.triggerBindingElements_()}},{key:"updateCount_",value:function(t){var i=parseInt(t,10);this.advanceCount_!==i&&(this.element.getAttribute("advance-count")!==i.toString()&&this.element.setAttribute("advance-count",i),this.advanceCount_=i,this.applyCountsToDOM_(),null!==this.slideIndex_&&this.handleShowSlide_(this.slideIndex_,!1,V,!0))}},{key:"updateDirect_",value:function(t){this.element.setAttribute("direct",t),this.direct_=t,this.effect_.update({direct:t,index:this.slideIndex_,animateTime:this.animateTime_})}},{key:"setupAutoplay_",value:function(){var t=Number(this.element.getAttribute("delay"));t>0&&(this.autoplayDelay_=Math.max(1e3,t)),this.autoplay_(),this.effectType_===q&&this.shouldLoop_&&this.dispatchEvent_()}},{key:"autoplay_",value:function(){this.shouldAutoplay_&&(this.listenEnd_=SPZUtils.Event.listen(this.element,"transitionend",this.timerForInPlay_.bind(this),{passive:!0}))}},{key:"timerForInPlay_",value:function(){this.clearAutoplayTimer_(),this.autoplayDelay_<1e3&&this.element.hasAttribute("move")||(this.autoplayTimeoutId_=SPZServices.timerFor(this.win).delay(this.go.bind(this,1,!0,!0),this.autoplayDelay_))}},{key:"clearAutoplayTimer_",value:function(){null!==this.autoplayTimeoutId_&&(SPZServices.timerFor(this.win).cancel(this.autoplayTimeoutId_),this.autoplayTimeoutId_=null),this.listenEnd_&&this.listenEnd_()}},{key:"cancelCopyTask_",value:function(){this.element.unmounted_=!0,SPZServices.timerFor(this.win).cancel(this.element.copyTimer_)}},{key:"dispatchEvent_",value:function(){if(this.shouldAutoplay_){var t=SPZUtils.Event.create(this.win,"transitionend",{},{bubbles:!1});this.element.dispatchEvent(t)}}},{key:"resize_",value:function(){var t;this.calcPrePosition_(),this.recalculateCounts_(!0),null===(t=this.effect_)||void 0===t||t.effect({index:this.slideIndex_,animateTime:this.animateTime_,update:!0,isUpdate:!0})}},{key:"updateSelect_",value:function(t){var i=this,s=this.noOfSlides_;if(t<0||t>=s||this.slideIndex_==t)return!1;this.slideIndex_=t,this.slidesContainer_.setAttribute("select",this.slideIndex_),this.mutateElement((function(){i.controls_.setControlsState({prev:i.hasPrev_(),next:i.hasNext_()})})),this.triggerActionByName_("slideChange",t)}},{key:"updateMaxIndex_",value:function(t){this.visibleCount_=this.count_-t}},{key:"loadedCallback_",value:function(){var t,i=this;this.shouldAutoplay_&&(this.unObserver_=SPZCore.observeIntersections(this.element,(function(t){var s=t.isIntersecting;SPZCore.Dom.toggleAttribute(i.element,"pause",!s),s&&i.shouldAutoplay_&&i.autoplay_()}))),(t=this.element).childIds_.length&&(t.copyTimer_=function(t){if(self.requestIdleCallback){var i=self.requestIdleCallback(t);return function(){return cancelIdleCallback(i)}}return SPZServices.timerFor(self).delay(t)}((function(){var i,s,e;null===(i=(s=SPZServices.templatesForDoc()).render)||void 0===i||i.call(s,(e=t.childIds_,"\n  <style>\n    ${(()=>{\n      return ".concat(JSON.stringify(e),".map((id) => {\n        const pattern = '#' + id + '(\\\\b)';\n        return data.originData.styleSheets.flat().filter((item) => {\n          return item.includes('#' + id) && new RegExp(pattern).test(item);\n        })\n        .map((item) => item.replace(new RegExp(pattern, 'g'),  '#' + id + '-copy')).join('\\n') || '';\n      }).join('\\n') || '';\n    })()}\n  </style>\n  ")),{styleSheets:Array.from(document.styleSheets).map((function(t){try{var i;return null!==(i=t.ownerNode)&&void 0!==i&&i.classList.contains(b)?[]:Array.from(t.cssRules).map((function(t){return t.cssText}))}catch(t){return[]}}))}).then((function(i){""===(null==i?void 0:i.innerHTML.trim())||t.unmounted_||(i.classList.add(b),document.head.appendChild(i))}))})))}}])&&function(t,i){for(var s=0;s<i.length;s++){var e=i[s];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),m}(t.BaseElement);self.SPZ.registerElement(J,K,"spz-carousel{overflow:hidden}.spz-carousel-slide>.i-spzhtml-replaced-content{-o-object-fit:contain;object-fit:contain}.spz-carousel-button{position:absolute;box-sizing:border-box;top:50%;border-radius:2px;opacity:0;pointer-events:all;background-position:50% 50%;background-repeat:no-repeat;transform:translateY(-50%);visibility:hidden;z-index:10}.spz-mode-mouse .spz-carousel-button,spz-carousel.i-spzhtml-carousel-has-controls>.spz-carousel-button,spz-carousel[controls]>.spz-carousel-button{opacity:1;visibility:visible}.spz-carousel-button-prev{left:16px}.spz-carousel-button-next{right:16px}.i-spzhtml-carousel-button-start-hint .spz-carousel-button:not(.spz-disabled){animation:i-spzhtml-carousel-hint 1s ease-in 3s 1 normal both}@keyframes i-spzhtml-carousel-hint{0%{opacity:1;visibility:visible}to{opacity:0;visibility:hidden}}spz-carousel[i-spzhtml-carousel-hide-buttons] .spz-carousel-button-next,spz-carousel[i-spzhtml-carousel-hide-buttons] .spz-carousel-button-prev{opacity:0;pointer-events:none;visibility:visible!important}spz-carousel[direct=vertical]{overflow:hidden}spz-carousel[direct=vertical] .i-spzhtml-slides-container{-ms-flex-direction:column;flex-direction:column}spz-carousel[advance-count] .i-spzhtml-slide-item{display:-ms-flexbox;display:flex}spz-carousel[advance-count] .i-spzhtml-slides-container-wrapper{display:-ms-flexbox!important;display:flex!important;-ms-flex-wrap:nowrap;flex-wrap:nowrap;width:100%!important;scrollbar-width:none;box-sizing:content-box!important;overflow:hidden}spz-carousel .i-spzhtml-slides-container{position:relative;width:100%;height:100%;z-index:1;display:-ms-flexbox;display:flex;transition-property:transform;box-sizing:content-box;transform:translate(0px)}spz-carousel:not([layout=container]) .i-spzhtml-slides-container{height:100%!important;position:absolute!important;top:0;left:0}spz-carousel[effect=fade]{will-change:height}spz-carousel[effect=fade] .i-spzhtml-slides-container .i-spzhtml-slide-item{opacity:0;display:none;will-change:height;transform:translate(0px)}spz-carousel[effect=fade] .i-spzhtml-slides-container .i-spzhtml-slide-item-show{display:block!important;pointer-events:all!important}spz-carousel[effect=fade] .i-spzhtml-slides-container .i-spzhtml-slide-item{pointer-events:none}[zoom][zoom-in] .i-spzhtml-slides-container{height:100%!important}.i-spzhtml-slides-container::-webkit-scrollbar{display:none!important}.i-spzhtml-slides-container.i-spzhtml-no-scroll{overflow-x:hidden!important}spz-carousel .i-spzhtml-slide-item{-ms-flex-negative:0;flex-shrink:0;width:100%;height:100%;position:relative;transition-property:transform;display:-ms-flexbox;display:flex}spz-carousel .i-spzhtml-slide-item>*{width:100%;overflow:hidden!important}spz-carousel .i-spzhtml-slide-item img,video{-webkit-user-drag:none}[zoom][zoom-in]{position:fixed!important;left:0;right:0;top:0;bottom:0;background:#000;z-index:1030;width:100vw!important}spz-carousel[effect=fade] .i-spzhtml-layout-size-defined .i-spzhtml-fill-content{z-index:1031}spz-carousel[zoom] .close{position:absolute;top:24px;right:14px;width:36px;height:36px;z-index:1032}spz-carousel[dragging] a{pointer-events:none}spz-carousel[effect=swipe][direct=vertical]>.i-spzhtml-slides-container{overflow-y:scroll;overflow-x:hidden}spz-carousel[effect=swipe]>.i-spzhtml-slides-container{overflow-x:scroll}@media (max-width:959.98px){spz-carousel[effect=swipe] .i-spzhtml-slides-container{scroll-snap-type:both mandatory;overscroll-behavior-x:contain}spz-carousel[effect=swipe] .i-spzhtml-slide-item{scroll-snap-stop:always;scroll-snap-align:start}}\n/*# sourceURL=/extensions/spz-carousel/0.1/spz-carousel.css*/")}()}});
